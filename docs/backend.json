{
  "entities": {
    "Estate": {
      "title": "Estate",
      "type": "object",
      "description": "Represents the overall estate, owned by a user.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the estate, matches owner's UID." },
        "name": { "type": "string", "description": "Name of the estate." },
        "ownerId": { "type": "string", "description": "UID of the user who owns this estate data." },
        "createdAt": { "type": "string", "description": "ISO timestamp of when the estate was created."}
      },
      "required": ["id", "name", "ownerId", "createdAt"]
    },
    "Personnel": {
      "title": "Personnel",
      "type": "object",
      "description": "Represents an employee or staff member.",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "familyName": { "type": "string" },
        "nationalId": { "type": "string" },
        "accountNumber": { "type": "string" },
        "insuranceNumber": { "type": "string" },
        "hireDate": { "type": "string", "format": "date" },
        "phone": { "type": "string" },
        "position": { "type": "string", "enum": ["سرایدار", "خدمات", "نگهبان", "حسابدار", "مدیر شهرک"] },
        "status": { "type": "string", "enum": ["مشغول کار", "اتمام کار", "مرخصی", "غیبت"] },
        "estateId": { "type": "string", "description": "FK to Estate" }
      },
      "required": ["id", "name", "familyName", "position", "status", "estateId"]
    },
    "Resident": {
      "title": "Resident",
      "type": "object",
      "description": "Represents a resident living in a villa.",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "familyName": { "type": "string" },
        "phone": { "type": "string" },
        "carPlates": { "type": "string" },
        "villaNumber": { "type": "number" },
        "status": { "type": "string", "enum": ["ساکن", "خالی"] },
        "isPresent": { "type": "boolean" },
        "estateId": { "type": "string", "description": "FK to Estate" },
        "villaId": { "type": "string", "description": "FK to Villa"}
      },
      "required": ["id", "name", "familyName", "villaNumber", "status", "isPresent", "estateId", "villaId"]
    },
    "BoardMember": {
      "title": "BoardMember",
      "type": "object",
      "description": "Represents a member of the board.",
      "properties": {
        "id": { "type": "string" },
        "residentId": { "type": "string" },
        "name": { "type": "string" },
        "familyName": { "type": "string" },
        "position": { "type": "string" },
        "phone": { "type": "string" },
        "villaNumber": { "type": "number" },
        "estateId": { "type": "string", "description": "FK to Estate" }
      },
      "required": ["id", "residentId", "name", "familyName", "position", "estateId"]
    },
    "Villa": {
      "title": "Villa",
      "type": "object",
      "description": "Represents a villa or property.",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "owner": { "type": "string" },
        "area": { "type": "number" },
        "residentInfo": { "type": "string" },
        "phone": { "type": "string" },
        "villaNumber": { "type": "number" },
        "estateId": { "type": "string", "description": "FK to Estate" }
      },
      "required": ["id", "name", "owner", "villaNumber", "estateId"]
    },
    "FinancialTransaction": {
      "title": "FinancialTransaction",
      "type": "object",
      "description": "Represents a financial transaction.",
      "properties": {
        "id": { "type": "string" },
        "type": { "type": "string", "enum": ["دریافتی", "پرداختی"] },
        "party": { "type": "string" },
        "reason": { "type": "string" },
        "amount": { "type": "number" },
        "date": { "type": "string", "format": "date" },
        "estateId": { "type": "string", "description": "FK to Estate" }
      },
      "required": ["id", "type", "party", "amount", "date", "estateId"]
    },
    "Document": {
      "title": "Document",
      "type": "object",
      "description": "Represents a document.",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "category": { "type": "string", "enum": ["شرکت", "طرفین", "پرسنل", "ادارات"] },
        "uploadDate": { "type": "string", "format": "date" },
        "url": { "type": "string", "format": "uri" },
        "estateId": { "type": "string", "description": "FK to Estate" }
      },
      "required": ["id", "name", "category", "uploadDate", "url", "estateId"]
    },
     "CompanyInfo": {
      "title": "CompanyInfo",
      "type": "object",
      "description": "Stores basic company/estate information.",
      "properties": {
        "name": { "type": "string" },
        "defaultEntryTime": { "type": "string" },
        "defaultExitTime": { "type": "string" },
        "estateId": { "type": "string" }
      },
      "required": ["name", "estateId"]
    },
    "PayrollSettings": {
      "title": "PayrollSettings",
      "type": "object",
      "description": "Stores payroll calculation settings.",
      "properties": {
        "baseHourlyRate": { "type": "number" },
        "overtimeMultiplier": { "type": "number" },
        "estateId": { "type": "string" }
      },
      "required": ["baseHourlyRate", "overtimeMultiplier", "estateId"]
    },
     "WorkLog": {
      "title": "WorkLog",
      "type": "object",
      "description": "Represents a daily work log for personnel.",
      "properties": {
        "id": { "type": "string" },
        "personnelId": { "type": "string" },
        "date": { "type": "string", "format": "date" },
        "entryTime": { "type": "string" },
        "exitTime": { "type": "string" },
        "hoursWorked": { "type": "number" },
        "estateId": { "type": "string" }
      },
      "required": ["id", "personnelId", "date", "estateId"]
    },
     "PayrollRecord": {
      "title": "PayrollRecord",
      "type": "object",
      "description": "Stores a calculated payroll record.",
      "properties": {
        "id": { "type": "string" },
        "personnelId": { "type": "string" },
        "personnelName": { "type": "string" },
        "calculationDate": { "type": "string", "format": "date" },
        "hourlyRate": { "type": "number" },
        "entryTime": { "type": "string" },
        "exitTime": { "type": "string" },
        "hoursWorked": { "type": "number" },
        "overtimeHours": { "type": "number" },
        "overtimeMultiplier": { "type": "number" },
        "holidayPay": { "type": "number" },
        "deductions": { "type": "number" },
        "grossPay": { "type": "number" },
        "netPay": { "type": "number" },
        "overtimePay": { "type": "number" },
        "estateId": { "type": "string" }
      },
      "required": ["id", "personnelId", "calculationDate", "netPay", "estateId"]
    }
  },
  "auth": {
    "providers": [
      "password"
    ]
  },
  "firestore": {
     "collections": [
      {
        "path": "/estates/{estateId}",
        "schema": { "$ref": "#/entities/Estate" },
        "description": "Top-level collection for estates. The document ID is the UID of the owner."
      },
      {
        "path": "/estates/{estateId}/personnel/{personnelId}",
        "schema": { "$ref": "#/entities/Personnel" },
        "description": "Subcollection for personnel belonging to an estate."
      },
      {
        "path": "/estates/{estateId}/residents/{residentId}",
        "schema": { "$ref": "#/entities/Resident" },
        "description": "Subcollection for residents belonging to an estate."
      },
      {
        "path": "/estates/{estateId}/boardMembers/{boardMemberId}",
        "schema": { "$ref": "#/entities/BoardMember" },
        "description": "Subcollection for board members of an estate."
      },
      {
        "path": "/estates/{estateId}/villas/{villaId}",
        "schema": { "$ref": "#/entities/Villa" },
        "description": "Subcollection for villas within an estate."
      },
      {
        "path": "/estates/{estateId}/financialTransactions/{transactionId}",
        "schema": { "$ref": "#/entities/FinancialTransaction" },
        "description": "Subcollection for financial transactions of an estate."
      },
      {
        "path": "/estates/{estateId}/documents/{documentId}",
        "schema": { "$ref": "#/entities/Document" },
        "description": "Subcollection for documents related to an estate."
      },
      {
        "path": "/estates/{estateId}/companyInfo/{docId}",
        "schema": { "$ref": "#/entities/CompanyInfo" },
        "description": "Subcollection for storing company info."
      },
      {
        "path": "/estates/{estateId}/payrollSettings/{docId}",
        "schema": { "$ref": "#/entities/PayrollSettings" },
        "description": "Subcollection for storing payroll settings."
      },
      {
        "path": "/estates/{estateId}/workLogs/{docId}",
        "schema": { "$ref": "#/entities/WorkLog" },
        "description": "Subcollection for storing daily work logs."
      },
      {
        "path": "/estates/{estateId}/payrollRecords/{docId}",
        "schema": { "$ref": "#/entities/PayrollRecord" },
        "description": "Subcollection for storing calculated payroll records."
      }
    ]
  }
}
